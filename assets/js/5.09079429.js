(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{351:function(t,s,n){"use strict";n.r(s);var a=n(43),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"go使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#go使用"}},[t._v("#")]),t._v(" Go使用")]),t._v(" "),n("h2",{attrs:{id:"flag"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" flag")]),t._v(" "),n("blockquote",[n("p",[t._v("go语言中的函数可以有多个返回值")])]),t._v(" "),n("blockquote",[n("p",[t._v("go语言是一种函数式编程语言，函数是go语言中的一等公民，函数的参数，返回值以及函数体内都可以存在函数")])]),t._v(" "),n("blockquote",[n("p",[t._v("go中的函数没有默认参数、可选参数也没有函数重载、操作符重载，但有可变参数列表，即（变量　...类型），此时类型钱的变量是一个此类型的数组")])]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://my.oschina.net/byonds/blog/488492",target:"_blank",rel:"noopener noreferrer"}},[t._v("strconv包使用"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/84bac7932394",target:"_blank",rel:"noopener noreferrer"}},[t._v("runtime包"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://blog.csdn.net/TDCQZD/article/details/81835149",target:"_blank",rel:"noopener noreferrer"}},[t._v("File操作"),n("OutboundLink")],1)])])]),t._v(" "),n("ul",[n("li",[t._v("判断结构体是否为空")])]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" reflect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("DeepEqual")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a == A{} empty"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 括号不能去")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a == A{} empty"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("h2",{attrs:{id:"module"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[t._v("#")]),t._v(" Module")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("init")]),t._v(" "),n("td",[t._v("initialize new module in current directory（在当前目录初始化mod）")])]),t._v(" "),n("tr",[n("td",[t._v("download")]),t._v(" "),n("td",[t._v("download modules to local cache(下载依赖包)")])]),t._v(" "),n("tr",[n("td",[t._v("edit")]),t._v(" "),n("td",[t._v("edit go.mod from tools or scripts（编辑go.mod")])]),t._v(" "),n("tr",[n("td",[t._v("graph")]),t._v(" "),n("td",[t._v("print module requirement graph (打印模块依赖图)")])]),t._v(" "),n("tr",[n("td",[t._v("tidy")]),t._v(" "),n("td",[t._v("add missing and remove unused modules(拉取缺少的模块，移除不用的模块)")])]),t._v(" "),n("tr",[n("td",[t._v("vendor")]),t._v(" "),n("td",[t._v("make vendored copy of dependencies(将依赖复制到vendor下)")])]),t._v(" "),n("tr",[n("td",[t._v("verify")]),t._v(" "),n("td",[t._v("verify dependencies have expected content (验证依赖是否正确）")])]),t._v(" "),n("tr",[n("td",[t._v("why")]),t._v(" "),n("td",[t._v("explain why packages or modules are needed(解释为什么需要依赖)")])])])]),t._v(" "),n("ul",[n("li",[t._v("添加依赖")])]),t._v(" "),n("blockquote",[n("p",[t._v("添加依赖: "),n("code",[t._v("go get github.com/xxx/xxx")])])]),t._v(" "),n("blockquote",[n("p",[t._v("添加指定版本: "),n("code",[t._v("go get github.com/xxx/xxx@v1.6.2")])])]),t._v(" "),n("blockquote",[n("p",[t._v("添加指定版本范围: "),n("code",[t._v("go get github.com/xxxx/xxx@'<v1.6.2'")])])]),t._v(" "),n("blockquote",[n("p",[t._v("添加指定"),n("code",[t._v("commit")]),t._v("的版本："),n("code",[t._v("go get github.com/xxxx/xxx@q2516faf3")])])]),t._v(" "),n("ul",[n("li",[t._v("查看所有可升级依赖版本")])]),t._v(" "),n("blockquote",[n("p",[n("code",[t._v("go list -u -m all")])])]),t._v(" "),n("ul",[n("li",[t._v("升级依赖")])]),t._v(" "),n("blockquote",[n("p",[t._v("升级"),n("code",[t._v("Major")]),t._v(": "),n("code",[t._v("go get -u github.com/xxx/xxx")])])]),t._v(" "),n("blockquote",[n("p",[t._v("升级全部依赖的"),n("code",[t._v("Minor")]),t._v("或"),n("code",[t._v("PATCH")]),t._v("版本: "),n("code",[t._v("go get -u")])])]),t._v(" "),n("blockquote",[n("p",[t._v("升级全部依赖的"),n("code",[t._v("PATCH")]),t._v("版本: "),n("code",[t._v("go get -u=patch")])])]),t._v(" "),n("h2",{attrs:{id:"运行命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行命令"}},[t._v("#")]),t._v(" 运行命令")]),t._v(" "),n("ul",[n("li",[t._v("测试文件中单个函数")])]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("go "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" -v 文件名_test.go -test.run 函数名\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接指定函数不指定文件运行")]),t._v("\ngo "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" -v -test.run 函数名\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("table",[n("thead",[n("tr",[n("th",[t._v("关键点")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("导入需要的包")]),t._v(" "),n("td",[t._v("import testing (如果你是goland,那么可以忽略，因为ide就自动帮你加上)")])]),t._v(" "),n("tr",[n("td",[t._v("执行命令")]),t._v(" "),n("td",[t._v("go test file_test.go")])]),t._v(" "),n("tr",[n("td",[t._v("测试文件命名")]),t._v(" "),n("td",[t._v("必须以_test.go结尾")])]),t._v(" "),n("tr",[n("td",[t._v("功能测试的用力函数")]),t._v(" "),n("td",[t._v("必须以Test开头&&后头跟着的函数名不能以小写字母开头，比如：Testcbs 就是不行的，TestCbs就是ok的")])]),t._v(" "),n("tr",[n("td",[t._v("功能测试参数")]),t._v(" "),n("td",[t._v("testing.T")])]),t._v(" "),n("tr",[n("td",[t._v("压力测试用例函数")]),t._v(" "),n("td",[t._v("必须以Benchmark开头&&其后的函数名不能以小写字母开头(例子同上)")])]),t._v(" "),n("tr",[n("td",[t._v("压力测试参数")]),t._v(" "),n("td",[t._v("testing.B")])]),t._v(" "),n("tr",[n("td",[t._v("测试信息")]),t._v(" "),n("td",[t._v(".Log方法，默认情况下是不会显示的，只有在go test -v的时候显示")])]),t._v(" "),n("tr",[n("td",[t._v("测试控制")]),t._v(" "),n("td",[t._v("通过Error/Errorf/FailNow/Fatal等来进行测试是否是失败，或者在失败的情况下的控制")])]),t._v(" "),n("tr",[n("td",[t._v("压力测试命令")]),t._v(" "),n("td",[t._v("go test -test.bench file_test.go")])]),t._v(" "),n("tr",[n("td",[t._v("压力测试的循环体")]),t._v(" "),n("td",[t._v("使用test.B.N")])])])]),t._v(" "),n("h2",{attrs:{id:"字符串"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字符串"}},[t._v("#")]),t._v(" 字符串")]),t._v(" "),n("h3",{attrs:{id:"strings包api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#strings包api"}},[t._v("#")]),t._v(" "),n("code",[t._v("strings")]),t._v("包API")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("strings.HasPrefix(s string, prefix string) bool")]),t._v("：判断字符串s是否以prefix开头")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.HasSuffix(s string, suffix string) bool")]),t._v("：判断字符串s是否以suffix结尾。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Index(s string, str string) int")]),t._v("：判断str在s中首次出现的位置，如果没有出现，则返回-1")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.LastIndex(s string, str string) int")]),t._v("：判断str在s中最后出现的位置，如果没有出现，则返回-1")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Replace(str string, old string, new string, n int)")]),t._v("：字符串替换")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Count(str string, substr string)int")]),t._v("：字符串计数")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Repeat(str string, count int)string")]),t._v("：重复count次str")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.ToLower(str string)string")]),t._v("：转为小写")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.ToUpper(str string)string")]),t._v("：转为大写")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.TrimSpace(str string)")]),t._v("：去掉字符串首尾空白字符")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Trim(str string, cut string)")]),t._v("：去掉字符串首尾cut字符")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.TrimLeft(str string, cut string)")]),t._v("：去掉字符串首cut字符")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.TrimRight(str string, cut string)")]),t._v("：去掉字符串首cut字符")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Field(str string)")]),t._v("：返回str空格分隔的所有子串的slice")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Split(str string, split string)")]),t._v("：返回str split分隔的所有子串的slice")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Join(s1 []string, sep string)")]),t._v("：用sep把s1中的所有元素链接起来")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Itoa(i int)")]),t._v("：把一个整数i转成字符串")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("strings.Atoi(str string)(int, error)")]),t._v("：把一个字符串转成整数")])])]),t._v(" "),n("h3",{attrs:{id:"字符串拼接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字符串拼接"}},[t._v("#")]),t._v(" 字符串拼接")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("+")]),t._v(" 连接适用于短小的、常量字符串（明确的，非变量），因为编译器会给我们优化。")]),t._v(" "),n("li",[n("code",[t._v("Join")]),t._v("是比较统一的拼接，不太灵活")]),t._v(" "),n("li",[n("code",[t._v("fmt")]),t._v("和"),n("code",[t._v("buffer")]),t._v("基本上不推荐")]),t._v(" "),n("li",[n("code",[t._v("builder")]),t._v("从性能和灵活性上，都是上佳的选择。")])]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringPlus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" s "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\tl"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("l"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\ts"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" s\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringFmt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringJoin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" strings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringBuffer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b bytes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Buffer\n\tl"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("l"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("WriteString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b strings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder\n\tl"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("l"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("WriteString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br")])]),n("h2",{attrs:{id:"路径操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#路径操作"}},[t._v("#")]),t._v(" 路径操作")]),t._v(" "),n("blockquote",[n("p",[t._v("Go标准库中还有"),n("code",[t._v("path")]),t._v("和"),n("code",[t._v("path/filepath")]),t._v("函数有点重复,大部分情况下建议使用"),n("code",[t._v("path/filepath")])])]),t._v(" "),n("blockquote",[n("p",[t._v("两者区别是："),n("code",[t._v("path")]),t._v("使用"),n("code",[t._v("/")]),t._v("作为路径分隔符，"),n("code",[t._v("path/filepath")]),t._v("判断系统使用不同的路径分隔符")])]),t._v(" "),n("h3",{attrs:{id:"path包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#path包"}},[t._v("#")]),t._v(" "),n("code",[t._v("path")]),t._v("包")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("函数")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("IsAbs(path string) bool")]),t._v(" "),n("td",[t._v("判断是否是一个绝对路径")])]),t._v(" "),n("tr",[n("td",[t._v("Split(path string) (dir, file string)")]),t._v(" "),n("td",[t._v("将路径分割为路径和文件名")])]),t._v(" "),n("tr",[n("td",[t._v("Join(elem ...string) string")]),t._v(" "),n("td",[t._v("将多个字符串合并为一个路径")])]),t._v(" "),n("tr",[n("td",[t._v("Ext(path string) string")]),t._v(" "),n("td",[t._v("返回路径中扩展部分")])]),t._v(" "),n("tr",[n("td",[t._v("Base(path string) string")]),t._v(" "),n("td",[t._v("返回路径的最后一个元素")])]),t._v(" "),n("tr",[n("td",[t._v("Dir(path string) string")]),t._v(" "),n("td",[t._v("返回路径中目录部分")])]),t._v(" "),n("tr",[n("td",[t._v("Clean(path string) string")]),t._v(" "),n("td",[t._v("返回同目录的最短路径")])]),t._v(" "),n("tr",[n("td",[t._v("Match(pattern, name string) (matched bool, err error)")]),t._v(" "),n("td",[t._v("正则是否匹配路径（shell 文件名匹配）")])])])]),t._v(" "),n("h3",{attrs:{id:"filepath包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filepath包"}},[t._v("#")]),t._v(" "),n("code",[t._v("filepath")]),t._v("包")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("函数")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("filepath.ListSeparator")]),t._v(" "),n("td",[t._v("预定义变量，表示环境变量分隔符 :")])]),t._v(" "),n("tr",[n("td",[t._v("filepath.Separator")]),t._v(" "),n("td",[t._v("预定义变量，表示路径分隔符/")])]),t._v(" "),n("tr",[n("td",[t._v("Abs(path string) (string, error)")]),t._v(" "),n("td",[t._v("返回path 相对当前路径的绝对路径")])]),t._v(" "),n("tr",[n("td",[t._v("Base(path string) string")]),t._v(" "),n("td",[t._v("返回路径最后一个元素")])]),t._v(" "),n("tr",[n("td",[t._v("Clean(path string) string")]),t._v(" "),n("td",[t._v("返回path 的最短路径")])]),t._v(" "),n("tr",[n("td",[t._v("Dir(path string) string")]),t._v(" "),n("td",[t._v("返回路径最后一个元素的目录")])]),t._v(" "),n("tr",[n("td",[t._v("EvalSymlinks(path string) (string, error)")]),t._v(" "),n("td",[t._v("返回软链指向的路径")])]),t._v(" "),n("tr",[n("td",[t._v("Ext(path string) string")]),t._v(" "),n("td",[t._v("返回路径中的扩展名，如果没有点返回空")])]),t._v(" "),n("tr",[n("td",[t._v("FromSlash(path string) string")]),t._v(" "),n("td",[t._v("/替换为路径分隔符")])]),t._v(" "),n("tr",[n("td",[t._v("Join(elem ...string) string")]),t._v(" "),n("td",[t._v("连接路径，返回已经clean过的路径")])]),t._v(" "),n("tr",[n("td",[t._v("Rel(basepath, targpath string) (string, error)")]),t._v(" "),n("td",[t._v("返回targpath 相对 basepath路径")])]),t._v(" "),n("tr",[n("td",[t._v("Split(path string) (dir, file string)")]),t._v(" "),n("td",[t._v("分割路径中的目录与文件")])]),t._v(" "),n("tr",[n("td",[t._v("SplitList(path string) []string")]),t._v(" "),n("td",[t._v("分隔环境变量里面的路径")])]),t._v(" "),n("tr",[n("td",[t._v("ToSlash(path string) string")]),t._v(" "),n("td",[t._v("路径分隔符替换为/")])]),t._v(" "),n("tr",[n("td",[t._v("VolumeName(path string) string")]),t._v(" "),n("td",[t._v("返回路径最前面的卷名")])]),t._v(" "),n("tr",[n("td",[t._v("Walk(root string, walkFn WalkFunc) error")]),t._v(" "),n("td",[t._v("遍历 root 目录下的文件树，并调用 walkFn")])]),t._v(" "),n("tr",[n("td",[t._v("Glob(pattern string) (matches []string, err error)")]),t._v(" "),n("td",[t._v("返回所有匹配的文件")])]),t._v(" "),n("tr",[n("td",[t._v("IsAbs(path string) (b bool)")]),t._v(" "),n("td",[t._v("判断路径是不是绝对路径")])]),t._v(" "),n("tr",[n("td",[t._v("Match(pattern, name string) (matched bool, err error)")]),t._v(" "),n("td",[t._v("匹配文件名，完全匹配则返回true")])])])]),t._v(" "),n("h2",{attrs:{id:"异常panic和恢复recover"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异常panic和恢复recover"}},[t._v("#")]),t._v(" 异常panic和恢复recover")]),t._v(" "),n("blockquote",[n("p",[t._v("Go语言追求简洁优雅，所以，Go语言不支持传统的"),n("code",[t._v("try…catch…finally")]),t._v(" 这种异常，因为Go语言的设计者们认为，\n将异常与控制结构混在一起会很容易使得代码变得混乱。因为开发者很容易滥用异常，甚至一个小小的错误都抛出一个异常。")])]),t._v(" "),n("blockquote",[n("p",[t._v("在Go语言中，使用多值返回来返回错误。不要用异常代替错误，更不要用来控制流程。在极个别的情况下，\n才使用Go中引入的"),n("code",[t._v("Exception")]),t._v("处理："),n("code",[t._v("defer")]),t._v("、"),n("code",[t._v("panic")]),t._v("、"),n("code",[t._v("recover")]),t._v("。")])]),t._v(" "),n("h3",{attrs:{id:"panic"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#panic"}},[t._v("#")]),t._v(" panic")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("1、内建函数")])]),t._v(" "),n("li",[n("p",[t._v("2、假如函数F中书写了"),n("code",[t._v("panic")]),t._v("语句，会终止其后要执行的代码，在"),n("code",[t._v("panic")]),t._v("所在函数F内如果存在要执行的"),n("code",[t._v("defer")]),t._v("函数列表，按照"),n("code",[t._v("defer")]),t._v("的逆序执行")])]),t._v(" "),n("li",[n("p",[t._v("3、返回函数F的调用者G，在G中，调用函数F语句之后的代码不会执行，假如函数G中存在要执行的"),n("code",[t._v("defer")]),t._v("函数列表，按照"),n("code",[t._v("defer")]),t._v("的逆序执行，\n这里的"),n("code",[t._v("defer")]),t._v("有点类似"),n("code",[t._v("try-catch-finally")]),t._v("中的"),n("code",[t._v("finally")])])]),t._v(" "),n("li",[n("p",[t._v("4、直到goroutine整个退出，并报告错误")])])]),t._v(" "),n("h3",{attrs:{id:"recover"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#recover"}},[t._v("#")]),t._v(" recover")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("1、内建函数")])]),t._v(" "),n("li",[n("p",[t._v("2、用来控制一个"),n("code",[t._v("goroutine")]),t._v("的"),n("code",[t._v("panicking")]),t._v("行为，捕获"),n("code",[t._v("panic")]),t._v("，从而影响应用的行为")])]),t._v(" "),n("li",[n("p",[t._v("3、一般的调用建议")]),t._v(" "),n("ul",[n("li",[t._v("a). 在defer函数中，通过"),n("code",[t._v("recever")]),t._v("来终止一个"),n("code",[t._v("goroutine")]),t._v("的"),n("code",[t._v("panicking")]),t._v("过程，从而恢复正常代码的执行")]),t._v(" "),n("li",[t._v("b). 可以获取通过"),n("code",[t._v("panic")]),t._v("传递的"),n("code",[t._v("error")])])])])]),t._v(" "),n("blockquote",[n("p",[t._v("简单来讲：go可以抛出一个"),n("code",[t._v("panic")]),t._v("的异常，然后在"),n("code",[t._v("defer")]),t._v("中通过"),n("code",[t._v("recover")]),t._v("捕获这个异常，然后正常处理。")])]),t._v(" "),n("blockquote",[n("p",[t._v("注意：利用"),n("code",[t._v("recover")]),t._v("处理"),n("code",[t._v("panic")]),t._v("指令，"),n("code",[t._v("defer")]),t._v("必须在"),n("code",[t._v("panic")]),t._v("之前声明，否则当panic时，"),n("code",[t._v("recover")]),t._v("无法捕获到"),n("code",[t._v("panic")])])]),t._v(" "),n("ul",[n("li",[t._v("示例")])]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"++++++++++++++++++++"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须要先声明defer，否则不能捕获到panic异常")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"============="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("recover")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的err其实就是panic传入的内容")]),t._v("\n\t\t\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"============="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始调用test")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里开始下面代码不会再执行")]),t._v("\n\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+++++++++++++++++++"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*******************"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"异常信息"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里开始下面代码不会再执行")]),t._v("\n\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br")])]),n("h2",{attrs:{id:"http"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[t._v("#")]),t._v(" http")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/2ecda118336f",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于golang 的readall清空reader"),n("OutboundLink")],1)])]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" buffer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("byte")]),t._v("\nresult "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" bytes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewBuffer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" io"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EOF "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//result, _ := ioutil.ReadAll(resp.Body)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须关闭")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取Body会清空对应Reader，这里使用了result后会被清空")]),t._v("\nresp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ioutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NopCloser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//resp.Body = ioutil.NopCloser(bytes.NewBuffer(result))")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析参数，填充到Form、PostForm")]),t._v("\nresp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ParseForm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析文件上传表单的post参数")]),t._v("\nresp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ParseMultipartForm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);