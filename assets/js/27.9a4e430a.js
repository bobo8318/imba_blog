(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{373:function(n,e,v){"use strict";v.r(e);var i=v(43),t=Object(i.a)({},(function(){var n=this,e=n.$createElement,v=n._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[v("h1",{attrs:{id:"nginx-使用记录"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#nginx-使用记录"}},[n._v("#")]),n._v(" nginx 使用记录")]),n._v(" "),v("h3",{attrs:{id:"windows-下-nginx-使用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#windows-下-nginx-使用"}},[n._v("#")]),n._v(" windows 下 nginx 使用")]),n._v(" "),v("ul",[v("li",[v("p",[n._v("下载地址：http://nginx.org/en/download.html")])]),n._v(" "),v("li",[v("p",[n._v("运行命令")]),n._v(" "),v("blockquote",[v("p",[n._v("start nginx //运行")]),n._v(" "),v("p",[n._v("nginx -t 查看配置状态")]),n._v(" "),v("p",[n._v("nginx -s stop/quiet 快速/有序 停止")]),n._v(" "),v("p",[n._v("nginx -s reload 重载配置")]),n._v(" "),v("p",[n._v("nginx -h 显示帮助信息")])])]),n._v(" "),v("li",[v("p",[n._v("网站配置")])]),n._v(" "),v("li",[v("p",[n._v("win下打包为服务")]),n._v(" "),v("blockquote",[v("p",[n._v("Windows Service Wrapper 小工具 下载地址如下：")]),n._v(" "),v("p",[n._v("http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/1.18/winsw-1.18-bin.exe")]),n._v(" "),v("p",[n._v("下载后放在nginx目录下，并修改名字为nginx-service.exe\n创建配置文件nginx-service.exe.config 和 nginx-service.xml\nnginx-service.exe install  安装服务")])]),n._v(" "),v("ul",[v("li",[n._v("nginx-service.xml的内容如下：")])]),n._v(" "),v("blockquote",[v("service",[v("id",[n._v("nginx")]),n._v(" "),v("name",[n._v("Nginx Service")]),n._v(" "),v("description",[n._v("High Performance Nginx Service")]),n._v(" "),v("logpath",[n._v("C:\\nginx-1.14.0\\logs")]),n._v(" "),v("log",{attrs:{mode:"roll-by-size"}},[v("sizeThreshold",[n._v("10240")]),n._v(" "),v("keepFiles",[n._v("8")])],1),n._v(" "),v("executable",[n._v("C:\\nginx-1.14.0\\nginx.exe")]),n._v(" "),v("startarguments",[n._v("-p C:\\nginx-1.14.0")]),n._v(" "),v("stopexecutable",[n._v("C:\\nginx-1.14.0\\nginx.exe")]),n._v(" "),v("stoparguments",[n._v("-p C:\\nginx-1.14.0 -s stop")])],1)],1),n._v(" "),v("ul",[v("li",[n._v("nginx-service.exe.config内容如下：")])]),n._v(" "),v("blockquote",[v("configuration",[v("startup",[v("supportedRuntime",{attrs:{version:"v2.0.50727"}}),n._v(" "),v("supportedRuntime",{attrs:{version:"v4.0"}})],1),n._v(" "),v("runtime",[v("generatePublisherEvidence",{attrs:{enabled:"false"}})],1)],1)],1),n._v(" "),v("p",[n._v("cmd命令输入 sc delete 服务名 可以删除这个服务 powershell下不行")])])]),n._v(" "),v("h3",{attrs:{id:"centos下安装使用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#centos下安装使用"}},[n._v("#")]),n._v(" centos下安装使用")]),n._v(" "),v("ul",[v("li",[v("p",[n._v("查看是否已安装过")]),n._v(" "),v("blockquote",[v("p",[n._v("find -name nginx")]),n._v(" "),v("p",[n._v("yum remove nginx //如果已安装需要删除")])])]),n._v(" "),v("li",[v("p",[n._v("下载")]),n._v(" "),v("blockquote",[v("p",[n._v("wget http://nginx.org/download/nginx-1.7.4.tar.gz"),v("br"),n._v("\nyum -y install wget  //安装wget")])])]),n._v(" "),v("li",[v("p",[n._v("解压")]),n._v(" "),v("blockquote",[v("p",[n._v("tar -zxvf nginx-1.7.4.tar.gz")])])]),n._v(" "),v("li",[v("p",[n._v("编译安装")]),n._v(" "),v("blockquote",[v("p",[n._v("yum install gcc-c++")]),n._v(" "),v("p",[n._v("yum install pcre pcre-devel")]),n._v(" "),v("p",[n._v("yum install zlib zlib-devel")]),n._v(" "),v("p",[n._v("yum install openssl openssl--devel")]),n._v(" "),v("p",[n._v("// 报./configure: error: C compiler cc is not found错误 执行下面命令")]),n._v(" "),v("p",[n._v("yum -y install gcc gcc-c++ autoconf automake make")]),n._v(" "),v("p",[n._v("./configure --prefix=/opt/nginx    // 编译的时候用来指定程序存放路径")]),n._v(" "),v("p",[n._v("make")]),n._v(" "),v("p",[n._v("make install")])])]),n._v(" "),v("li",[v("p",[n._v("运行")]),n._v(" "),v("blockquote",[v("p",[n._v("sudo sbin/nginx")])])]),n._v(" "),v("li",[v("p",[n._v("设置开机启动")]),n._v(" "),v("blockquote",[v("p",[n._v("cd /lib/systemd/system/")]),n._v(" "),v("p",[n._v("vi nginx.service")]),n._v(" "),v("p",[n._v("//内容如下")]),n._v(" "),v("p",[n._v("[Unit]\nDescription=nginx service\nAfter=network.target")]),n._v(" "),v("p",[n._v("[Service]\nType=forking\nExecStart=/opt/nginx/sbin/nginx\nExecReload=/opt/nginx/sbin/nginx -s reload\nExecStop=/opt/nginx/sbin/nginx -s quit\nPrivateTmp=true")]),n._v(" "),v("p",[n._v("[Install]\nWantedBy=multi-user.target")]),n._v(" "),v("p",[n._v("//说明")]),n._v(" "),v("p",[n._v("[Unit] 服务的说明\nDescription:描述服务\nAfter:描述服务类别\n[Service]服务运行参数的设置\nType=forking是后台运行的形式\nExecStart为服务的具体运行命令\nExecReload为重启命令\nExecStop为停止命令\nPrivateTmp=True表示给服务分配独立的临时空间\n注意：[Service]的启动、重启、停止命令全部要求使用绝对路径\n[Install]运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3")]),n._v(" "),v("p",[n._v("// 加入开机启动")]),n._v(" "),v("p",[n._v("systemctl enable nginx")]),n._v(" "),v("p",[n._v("// 取消开机启动")]),n._v(" "),v("p",[n._v("systemctl disable nginx\n// 常用操作\nsystemctl start nginx.service　         启动nginx服务")]),n._v(" "),v("p",[n._v("systemctl stop nginx.service　          停止服务")]),n._v(" "),v("p",[n._v("systemctl restart nginx.service　       重新启动服务")]),n._v(" "),v("p",[n._v("systemctl list-units --type=service     查看所有已启动的服务")]),n._v(" "),v("p",[n._v("systemctl status nginx.service          查看服务当前状态")]),n._v(" "),v("p",[n._v("systemctl enable nginx.service          设置开机自启动")]),n._v(" "),v("p",[n._v("systemctl disable nginx.service         停止开机自启动")])])])])])}),[],!1,null,null,null);e.default=t.exports}}]);