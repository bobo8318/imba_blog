(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{441:function(n,s,e){"use strict";e.r(s);var a=e(43),r=Object(a.a)({},(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"springcloud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#springcloud"}},[n._v("#")]),n._v(" springcloud")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("服务调用：restTemplate spring对http工具类（httpclient,okhttp）的封装")])]),n._v(" "),e("li",[e("p",[n._v("概述")]),n._v(" "),e("ul",[e("li",[n._v("很多组件组成\n"),e("ul",[e("li",[n._v("eureka 注册中心")]),n._v(" "),e("li",[n._v("Gateway网关")]),n._v(" "),e("li",[n._v("Ribbon负载均衡")]),n._v(" "),e("li",[n._v("feign服务调用")]),n._v(" "),e("li",[n._v("Hystrix熔断器")])])]),n._v(" "),e("li",[n._v("创建微服务工程\n"),e("ul",[e("li",[n._v("父工程")]),n._v(" "),e("li",[n._v("用户服务工程 service")]),n._v(" "),e("li",[n._v("消费工程 consumer")])])])])]),n._v(" "),e("li",[e("p",[n._v("springcloud")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("dependency")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v(" <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.0.5.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n   </parent>\n    \n   <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>1.8</java.version>\n        \x3c!--SpringCloud最新稳定版本--\x3e\n        <spring-cloud.version>Finchley.SR1</spring-cloud.version>\n    </properties>\n\n\x3c!--SpringCloud依赖版本管理--\x3e\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br"),e("span",{staticClass:"line-number"},[n._v("20")]),e("br"),e("span",{staticClass:"line-number"},[n._v("21")]),e("br"),e("span",{staticClass:"line-number"},[n._v("22")]),e("br"),e("span",{staticClass:"line-number"},[n._v("23")]),e("br"),e("span",{staticClass:"line-number"},[n._v("24")]),e("br"),e("span",{staticClass:"line-number"},[n._v("25")]),e("br"),e("span",{staticClass:"line-number"},[n._v("26")]),e("br"),e("span",{staticClass:"line-number"},[n._v("27")]),e("br")])])])])]),n._v(" "),e("li",[e("p",[n._v("eureka ：")]),n._v(" "),e("p",[n._v("spring cloud中discovery service有许多种实现（eureka、consul、zookeeper等等），@EnableDiscoveryClient基于spring-cloud-commons, @EnableEurekaClient基于spring-cloud-netflix。\n其实用更简单的话来说，就是如果选用的注册中心是eureka，那么就推荐@EnableEurekaClient，如果是其他的注册中心，那么推荐使用@EnableDiscoveryClient。")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("dependency")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("服务端：@EnableEurekaServer注解")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("//新版\n<dependency>\n            <groupId>org.springframework.cloud</groupId>\n           <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\n</dependency>\n\n//旧版\n<dependency>\n           <groupId>org.springframework.cloud</groupId>\n           <artifactId>spring-cloud-netflix-eureka-server</artifactId>\n</dependency>\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br")])])]),n._v(" "),e("li",[e("p",[n._v("provider：@EnableEurekaClient")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("//新版\n<dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n  </dependency>\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br")])])])]),n._v(" "),e("p",[n._v("//旧版\n"),e("dependency",[e("groupId",[n._v("org.springframework.cloud")]),n._v(" "),e("artifactId",[n._v("spring-cloud-starter-eureka")])],1),n._v("\n```")],1),n._v(" "),e("ul",[e("li",[e("p",[n._v("consume:@EnableFeignClients")]),n._v(" "),e("ul",[e("li",[n._v("依赖")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v(" <dependency>\n       <groupId>org.springframework.cloud</groupId>\n       <artifactId>spring-cloud-starter-feign</artifactId>\n   </dependency>\n\n  <dependency>\n      <groupId>org.springframework.cloud</groupId>\n       <artifactId>spring-cloud-starter-eureka</artifactId>\n </dependency>\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br")])]),e("ul",[e("li",[e("p",[n._v("使用")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('//调用接口\n@FeignClient(value = "CART") // value 或者 name都可以\npublic interface CartFeignClient {\n\n    @PostMapping("/cart/{productId}")\n    Long addCart(@PathVariable("productId")Long productId);\n}\n--------------------------------------------------------------------------\n//controller类中直接注入feign client\n@Autowired\nprivate CartFeignClient cartFeignClient;\n\n@PostMapping("/toCart/{productId}")\npublic ResponseEntity addCart(@PathVariable("productId") Long productId){\n    Long result = cartFeignClient.addCart(productId);\n    return ResponseEntity.ok(result);\n}\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br")])]),e("ul",[e("li",[e("p",[n._v("容错Hystrix feign中已经集成")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("#yml 启用\nfeign:\n\thystrix:\n\t\tenabled: true\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br")])])])])])])])])]),n._v(" "),e("li",[e("p",[n._v("application.yml")]),n._v(" "),e("ul",[e("li",[n._v("服务端")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("# 服务名称\nspring:\n  application:\n    name: hengboy-spring-cloud-eureka\n# 服务端口号\nserver:\n  port: 10000\n\n#Eureka 相关配置\n\neureka:\n  server:\n    enable-self-preservation: false           # 关闭自我保护模式（缺省为打开）\n    eviction-interval-timer-in-ms: 5000       # 续期时间，即扫描失效服务的间隔时间（缺省为60*1000ms）\n  client:\n    service-url:\n      defaultZone: http://localhost:${server.port}/eureka/\n    # 是否从其他的服务中心同步服务列表\n    fetch-registry: false\n    # 是否把自己作为服务注册到其他服务注册中心\n    register-with-eureka: false\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br"),e("span",{staticClass:"line-number"},[n._v("20")]),e("br"),e("span",{staticClass:"line-number"},[n._v("21")]),e("br")])]),e("ul",[e("li",[e("p",[n._v("客户端")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("# 服务名称\nspring:\n  application:\n    name: user-service\neureka:\n  client:\n  \tregistry-fetch-interval-seconds: 5 # 默认为30秒\n    service-url:\n      defaultZone: http://localhost:10000/eureka/\n    healthcheck:\n      enabled: true      # 开启健康检查（依赖spring-boot-starter-actuator）\n  instance:\n  \tip-address: 127.0.0.1\n  \tprefer-ip-address: true\n    lease-renewal-interval-in-seconds: 5 # 心跳时间，即服务续约间隔时间（缺省为30s）\n    lease-expiration-duration-in-seconds: 10# 发呆时间，即服务续约到期时间（缺省为90s）\n    \n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br")])])]),n._v(" "),e("li",[e("p",[n._v("feign配置")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("#feign的配置，连接超时及读取超时配置\nfeign:\n  client:\n    config:\n      default:\n        connectTimeout: 5000\n        readTimeout: 5000\n        loggerLevel: basic\n------------------------------------------------------------------------------\n# 开启gzip\nfeign:\n  compression:\n    request: #请求\n      enabled: true #开启\n      mime-types: text/xml,application/xml,application/json #开启支持压缩的MIME TYPE\n      min-request-size: 2048 #配置压缩数据大小的下限\n    response: #响应\n      enabled: true #开启响应GZIP压缩\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br")])]),e("ul",[e("li",[e("p",[n._v("单独使用")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('package pub.imba.config;\n\nimport feign.Feign;\nimport feign.Request;\nimport feign.Retryer;\nimport feign.auth.BasicAuthRequestInterceptor;\nimport feign.jackson.JacksonDecoder;\nimport feign.jackson.JacksonEncoder;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport pub.imba.feignInterface.DataFeignInterface;\n\n@Configuration\npublic class TestFeignConfig {\n\t// 登录认证\n    @Bean\n    public BasicAuthRequestInterceptor basicAuthRequestInterceptor() {\n        return new BasicAuthRequestInterceptor("dev1", "asfhunpjqw832h");\n    }\n\n    /**\n     * FeignClient 配置\n     * @return\n     */\n    @Bean\n    DataFeignInterface dataFeignClient() {\n        return Feign.builder()\n                //.client(new OkHttpClient())\n                //.logger(new TestApiFeignLogger())\n               // .logLevel(Logger.Level.FULL)\n                .requestInterceptor(basicAuthRequestInterceptor())\n                .encoder(new JacksonEncoder())\n                .decoder(new JacksonDecoder())\n                .options(new Request.Options(1000, 3500))\n                .retryer(new Retryer.Default(5000, 5000, 3))\n                .target(DataFeignInterface.class, "http://9eed78e3.ngrok.io");\n    }\n}\n\n//\npackage pub.imba.feignInterface;\n\nimport com.luo.erlei.comm.out.Brief;\nimport com.luo.erlei.comm.out.Ret;\nimport feign.Param;\nimport feign.RequestLine;\nimport org.springframework.cloud.netflix.feign.FeignClient;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport pub.imba.impl.UserFeignClientFallBack;\nimport pub.imba.model.MyUser;\nimport pub.imba.util.ResultEntry;\n\n//@FeignClient(name="user-service")\n/@FeignClient(name="service",configuration = FeignClientConfiguration.class)\n\n//@Component\npublic interface DataFeignInterface {\n\n\n    //@RequestMapping(value = "/q/brief", method = RequestMethod.GET)\n    //@RequestLine("GET /user/test?param={param}")\n    //public ResultEntry test(@Param("param") String param);\n\n    @RequestLine("GET /q/brief")\n    public Ret<Brief> brief();\n\n\n}\n\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br"),e("span",{staticClass:"line-number"},[n._v("20")]),e("br"),e("span",{staticClass:"line-number"},[n._v("21")]),e("br"),e("span",{staticClass:"line-number"},[n._v("22")]),e("br"),e("span",{staticClass:"line-number"},[n._v("23")]),e("br"),e("span",{staticClass:"line-number"},[n._v("24")]),e("br"),e("span",{staticClass:"line-number"},[n._v("25")]),e("br"),e("span",{staticClass:"line-number"},[n._v("26")]),e("br"),e("span",{staticClass:"line-number"},[n._v("27")]),e("br"),e("span",{staticClass:"line-number"},[n._v("28")]),e("br"),e("span",{staticClass:"line-number"},[n._v("29")]),e("br"),e("span",{staticClass:"line-number"},[n._v("30")]),e("br"),e("span",{staticClass:"line-number"},[n._v("31")]),e("br"),e("span",{staticClass:"line-number"},[n._v("32")]),e("br"),e("span",{staticClass:"line-number"},[n._v("33")]),e("br"),e("span",{staticClass:"line-number"},[n._v("34")]),e("br"),e("span",{staticClass:"line-number"},[n._v("35")]),e("br"),e("span",{staticClass:"line-number"},[n._v("36")]),e("br"),e("span",{staticClass:"line-number"},[n._v("37")]),e("br"),e("span",{staticClass:"line-number"},[n._v("38")]),e("br"),e("span",{staticClass:"line-number"},[n._v("39")]),e("br"),e("span",{staticClass:"line-number"},[n._v("40")]),e("br"),e("span",{staticClass:"line-number"},[n._v("41")]),e("br"),e("span",{staticClass:"line-number"},[n._v("42")]),e("br"),e("span",{staticClass:"line-number"},[n._v("43")]),e("br"),e("span",{staticClass:"line-number"},[n._v("44")]),e("br"),e("span",{staticClass:"line-number"},[n._v("45")]),e("br"),e("span",{staticClass:"line-number"},[n._v("46")]),e("br"),e("span",{staticClass:"line-number"},[n._v("47")]),e("br"),e("span",{staticClass:"line-number"},[n._v("48")]),e("br"),e("span",{staticClass:"line-number"},[n._v("49")]),e("br"),e("span",{staticClass:"line-number"},[n._v("50")]),e("br"),e("span",{staticClass:"line-number"},[n._v("51")]),e("br"),e("span",{staticClass:"line-number"},[n._v("52")]),e("br"),e("span",{staticClass:"line-number"},[n._v("53")]),e("br"),e("span",{staticClass:"line-number"},[n._v("54")]),e("br"),e("span",{staticClass:"line-number"},[n._v("55")]),e("br"),e("span",{staticClass:"line-number"},[n._v("56")]),e("br"),e("span",{staticClass:"line-number"},[n._v("57")]),e("br"),e("span",{staticClass:"line-number"},[n._v("58")]),e("br"),e("span",{staticClass:"line-number"},[n._v("59")]),e("br"),e("span",{staticClass:"line-number"},[n._v("60")]),e("br"),e("span",{staticClass:"line-number"},[n._v("61")]),e("br"),e("span",{staticClass:"line-number"},[n._v("62")]),e("br"),e("span",{staticClass:"line-number"},[n._v("63")]),e("br"),e("span",{staticClass:"line-number"},[n._v("64")]),e("br"),e("span",{staticClass:"line-number"},[n._v("65")]),e("br"),e("span",{staticClass:"line-number"},[n._v("66")]),e("br"),e("span",{staticClass:"line-number"},[n._v("67")]),e("br"),e("span",{staticClass:"line-number"},[n._v("68")]),e("br"),e("span",{staticClass:"line-number"},[n._v("69")]),e("br"),e("span",{staticClass:"line-number"},[n._v("70")]),e("br"),e("span",{staticClass:"line-number"},[n._v("71")]),e("br"),e("span",{staticClass:"line-number"},[n._v("72")]),e("br"),e("span",{staticClass:"line-number"},[n._v("73")]),e("br"),e("span",{staticClass:"line-number"},[n._v("74")]),e("br")])])])])])])])])]),n._v(" "),e("li",[e("p",[n._v("高可用：要相互注册 本机的defaultZone 注册其他eureka的地址")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("yml")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("server:\n\tport: ${port:1086} 如果设置了port 用port 没用 用1086\neureka:\n  client:\n    service-url:\n      defaultZone: ${defaultZone:http://localhost:10000/eureka/}\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br")])])])])])]),n._v(" "),e("p",[e("img",{attrs:{src:"C:%5CUsers%5CMy%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191222185631422.png",alt:"image-20191222185631422"}})]),n._v(" "),e("ul",[e("li",[e("p",[n._v("Ribbon负载均衡")])]),n._v(" "),e("li",[e("h3",{attrs:{id:"一些常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一些常见问题"}},[n._v("#")]),n._v(" 一些常见问题")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("java.lang.IllegalStateException: RequestParam.value() was empty on parameter 0")]),n._v(" "),e("blockquote",[e("p",[n._v("@RequestParam(required = false) String XXCode")]),n._v(" "),e("p",[n._v('这个参数少了个value = "XXCode", 这个是Spring 4.0版本后，@RequestParam 注解对参数传值有了很好的封装特性并严格校验。')]),n._v(" "),e("p",[n._v('改为：@RequestParam(value = "XXCode", required = false) String XXCode')])])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);