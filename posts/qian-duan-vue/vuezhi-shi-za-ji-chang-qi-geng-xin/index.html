<!DOCTYPE html>
<html lang="chinese (simplified)">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>vue知识杂记（长期更新） | imba吧
</title>
  <link rel="canonical" href="https://www.imba.pub/posts/qian-duan-vue/vuezhi-shi-za-ji-chang-qi-geng-xin/index.html">



  <link rel="stylesheet" href="https://www.imba.pub/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/style.css">


<meta name="description" content="vue知识杂记">
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1 class="title"><a href="https://www.imba.pub">imba吧</a></h1>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="http://www.openui.cn" target="_blank">openui</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>vue知识杂记（长期更新）
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2019-08-09T00:00:00+00:00">
        <i class="fa fa-clock-o"></i>
        Fri 09 August 2019
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://www.imba.pub/category/qian-duan-vue.html">前端,vue</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://www.imba.pub/author/openui.html">openui</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://www.imba.pub/tag/vue.html">#vue</a>,         <a href="https://www.imba.pub/tag/qian-duan.html">#前端</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h3>vue</h3>
<ul>
<li>原理</li>
<li>
<p>数据双向邦定:通过Object.defineProperty()</p>
</li>
<li>
<p>vue-router</p>
</li>
<li>
<p>安装：npm install vue-router  --save-dev </p>
</li>
<li>
<p>使用： src 下新建 router 文件件 新建index.js</p>
<p>```
import Vue from 'vue'
import Router from 'vue-router'
import HelloWorld from '@/component/helloworld.vue'
Vue.use(Router)</p>
<p>export default new Router({
    route:[
        {
            path:'/',
            name:'helloworld',
            component:Helloworld,
            redirect:'/index',
            alias:'hello'
        },
        {
        //动态路由带参数 ：开头
        path:'/list/:id',
        //可以不通过this.$router获取：id
        //直接当组件的props使用
        props:true,
        //通过name跳转
        name:'listdata',
        component:listdata
        }</p>
<div class="highlight"><pre><span></span>]
</pre></div>


<p>})</p>
<p>export default{
    name:'hello',
    props:['id'],
    mounted(){
        console.log(this.id);
    }
}
```</p>
</li>
<li>
<p>引用： main.js import router from './router'</p>
</li>
<li>
<p>导航使用：</p>
<p>```
<router-link to="/hello">go hello</router-link></p>
<p><router-link :to="{name:'view1'}">go hello</router-link></p>
<p><div @click="goto">function jump</div></p>
<p>methods:{
    goto(){
        this.$router.push('/hello2')
    }
}，
mounted(){
    //获取路由参数
    console.log(this.$router.param.id)
}
```</p>
</li>
<li>
<p>路由导航守卫</p>
<p>```
// 导航守卫
// 使用 router.beforeEach 注册一个全局前置守卫，判断用户是否登陆
router.beforeEach((to, from, next) =&gt; {
  if (to.path === '/login') {
    next();
  } else {
    let token = localStorage.getItem('Authorization');</p>
<div class="highlight"><pre><span></span>if (token === &#39;null&#39; || token === &#39;&#39;) {
  next(&#39;/login&#39;);
} else {
  next();
}
</pre></div>


<p>}
});
```</p>
</li>
<li>
<p>vuex</p>
</li>
<li>
<p>安装：npm install vuex -s</p>
</li>
<li>
<p>使用：新建文件夹 store 新建index.js</p>
<p>```
import Vue from 'vue';
import Vuex from 'vuex';
Vue.use(Vuex);
export default new Vuex.Store({
    plugin:[createLogger()],
    state:{
        x:1
    },
    //唯一修改state的方法
    mutation:{
        increment(state){
            state.x++;
        }
    }
})</p>
<p>Index.vue
import store from 'Vuex'</p>
<p>export default{
    methods:{
        add(){
            this.$store.commit('increment');
        },
        getx(){
            return this.$store.state.x
        } <br>
    }
}</p>
<p>// mapMutations</p>
<p>import { mapMutations } from 'vuex'</p>
<p>methods:{
     ...mapMutations( [ 'add','reduce' ] )
 }</p>
<p>// 直接调用即可
 <button @click='add'>加</button>
<button @click='reduce'>减</button>
```</p>
</li>
<li>
<p>vue</p>
</li>
<li>
<p>循环：</p>
<p><code>v-for="(item, index) in list" :key="index"</code></p>
</li>
<li>
<p>表单：</p>
<p>```</p>
<p>```</p>
</li>
<li>
<p>event bus 事件总线</p>
<ul>
<li>父组件会通过<code>props</code>向下传数据给子组件，当子组件有事情要告诉父组件时会通过<code>$emit</code>事件告诉父组件。</li>
</ul>
<p><img alt="https://www.w3cplus.com/sites/default/files/blogs/2018/1809/1488038869_67673.png" src=""></p>
<p>```
//eventbus.js
import Vue from 'vue' 
export const EventBus = new Vue()</p>
<p>// main.js Vue.prototype.$EventBus = new Vue()</p>
<p>Bus.$emit('getTarget', event.target);   </p>
<p>Bus.$on('getTarget', target =&gt; {<br>
            console.log(target);<br>
        });<br>
```</p>
</li>
<li>
<p>slot 插槽</p>
</li>
<li>
<p>将父组件放在子组件标签里的内容，放到想让他显示的地方,如下 如果子组件中没有slot 父组件的hello就不会显示出来。加入slot 父组件的包含内容 插到slot里</p>
<p>```
//子组件
<template>
  <div>
        <h3>我是子组件</h3>
        <slot></slot>//加了个slot标签，在父组件中，就可以让子组件标签内的内容显示啦
    </div>
</template></p>
<p>//父组件
<template>
  <div>
      //hello显示
      <v-child>hello</v-child>
  </div>
</template>
```</p>
</li>
<li>
<p>具名slot 子组件在对应分发的位置的slot标签里, 没有具名的内容会放到一个 子组件的默认插槽中 如果没有默认插槽就不显示。</p>
<p>```
//子组件
<template>
    <div>
        <h3>我是子组件</h3>
        <p><slot name="header">父组件中没header的时候会显示</slot></p>
        <p><slot name="footer">父组件中没footer的时候会显示</slot></p>
    </div>
</template></p>
<p>//父组件
<template>
  <div>
      <v-child>
          <p>hello</p>
          <h3 slot="header">header</h3>
      </v-child>
  </div>
</template></p>
<p>```</p>
</li>
<li>
<p>slot-scope:作用域插槽，可以接收子组件传来的数据</p>
<p>```
  // 父组件中
<slot-scope-child>
    <template slot-scope="user">
       <ul>
            <li v-for="(item, index) in user.data" :key="index">{{item}}</li>
       </ul>
    </template>
</slot-scope-child>
// 子组件中
<div class="child">
    <h3>这里是子组件</h3>
    <slot :data="data"></slot>
</div></p>
<p>数据在子组件，然后绑到父组件，父组件就可以使用了
```</p>
</li>
<li>
<p>父子组件间通信</p>
<ul>
<li>
<p>父到子</p>
</li>
<li>
<p>子组件中 props:['msgFather'] 接收父组件</p>
</li>
<li>
<p>父组件中 msg-father="dad无可奉告" 绑定数据</p>
</li>
<li>
<p>子到父</p>
</li>
<li>
<p>```
    //子组件
    this.$emit("sendiptVal", this.inputValue) 
    //子组件发射自定义事件sendiptVal 并携带要传递给父组件的值，
    // 如果要传递给父组件很多值，这些值要作为参数依次列出 如 this.$emit('valueUp', this.inputValue, this.mesFather); </p>
<p>//父组件
<accept-and-refuse @sendiptVal='showChildMsg'></accept-and-refuse></p>
<p>```</p>
</li>
<li>
<p>兄弟间</p>
</li>
</ul>
</li>
<li>
<p>网络请求</p>
</li>
<li>
<p>axios</p>
<ul>
<li>
<p>安装注册使用：npm i axios</p>
</li>
<li>
<p>拦截器</p>
</li>
</ul>
</li>
</ul>
<p>```
      axios.interceptors.request.use(
        config =&gt; {
            if (localStorage.getItem('loginToken')) {
                config.headers.Authorization = localStorage.getItem('loginToken');
              }</p>
<div class="highlight"><pre><span></span>        return config;
    },
    error =&gt; {
      return Promise.reject(error);
    }
  )
</pre></div>


<p>```</p>
<p>​      </p>
<ul>
<li>事件总线 Eventbus</li>
<li></li>
</ul>
  </div>

  <div class='zanshang'>
      <button id='showpay'>赏</button>
       <div id="payContent" class="payContent">

           <div><img src='/theme/images/weixinpay.png'><br>微信扫一扫</div>
           <div><img src='/theme/images/alipay.png'><br>支付宝扫一扫</div>

         </div>
   </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://www.imba.pub/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>