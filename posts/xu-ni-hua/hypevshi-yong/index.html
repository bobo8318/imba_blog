<!DOCTYPE html>
<html lang="chinese (simplified)">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>HypeV使用 | imba吧
</title>
  <link rel="canonical" href="https://www.imba.pub/posts/xu-ni-hua/hypevshi-yong/index.html">



  <link rel="stylesheet" href="https://www.imba.pub/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://www.imba.pub/theme/css/style.css">


<meta name="description" content="hyperv使用记录">
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1 class="title"><a href="https://www.imba.pub">imba吧</a></h1>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="http://www.openui.cn" target="_blank">openui</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>HypeV使用
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2019-11-09T00:00:00+00:00">
        <i class="fa fa-clock-o"></i>
        Sat 09 November 2019
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://www.imba.pub/category/xu-ni-hua.html">虚拟化</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://www.imba.pub/author/openui.html">openui</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://www.imba.pub/tag/xu-ni-hua.html">#虚拟化</a>,         <a href="https://www.imba.pub/tag/windows.html">#windows</a>,         <a href="https://www.imba.pub/tag/hyperv.html">#hyperv</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h3>HyperV</h3>
<ul>
<li>介绍</li>
</ul>
<p><em>Hyper-V</em>是微软的一款虚拟化产品，是微软第一个采用类似Vmware和Citrix开源Xen一样的基于<em>hyperv</em>isor的技术 </p>
<ul>
<li>
<p>安装</p>
</li>
<li>
<p>win10,win2008,2012以上系统，通过添加windows组件进行添加</p>
</li>
<li>
<p>win7只有hyperv管理器可以安装， 我们要先从微软的官网上下载Windows 7远程服务器管理工具，这个工具简称RSAT，是一个Windows更新补丁包 </p>
</li>
<li>
<p>使用</p>
</li>
<li>
<p>创建虚拟机可以在创建时选在需要安装的镜像文件就可以安装了</p>
</li>
<li>
<p>可以在媒体dvd驱动器中选择插入磁盘</p>
</li>
<li>
<p>网络设置</p>
</li>
<li>
<p>桥接</p>
<ul>
<li>
<p>新建虚拟交换机，选择外部，选择访问外网的网卡，勾选”允许管理操作系统共享此网络适配器“</p>
</li>
<li>
<p>设置虚拟机，网络 在虚拟交换机中选择刚才新建的虚拟交换机</p>
</li>
</ul>
</li>
<li>
<p>nat：就是提供一个类似路由器的功能</p>
<ul>
<li>
<p>新建虚拟交换机，选择内部</p>
</li>
<li>
<p>设置网络共享，点击连网的物理网卡，共享，在家庭网络连接中选择虚拟交换机，把两个允许也都勾上</p>
</li>
<li>
<p>ip地址设置：操作完后虚拟交换机的ip地址为192.168.137.1 子网掩码255.255.255.0，虚拟机色设置ip把这个设置成网关就可以了。虚拟机访问外网别忘了设置dns</p>
</li>
</ul>
<blockquote>
<p>阿里： 223.5.5.5  223.6.6.6 </p>
<p>谷歌： 8.8.8.8</p>
</blockquote>
<ul>
<li>设置端口映射：完成上述步骤后主机和虚拟机可以相互访问了，但是外部计算机无法访问虚拟机内容，需要做个端口映射：</li>
</ul>
<blockquote>
<p>netsh interface portproxy add v4tov4 listenport=8081 listenaddress=192.168.123.236 connectaddress=192.168.137.6  connectport=80</p>
</blockquote>
</li>
<li>
<p>常见问题</p>
</li>
<li>
<p>windows无网卡驱动</p>
<p>在媒体中选择插入系统集成服务光盘文件（2012可以直接选择插入系统集成服务，win10没有）文件位置在 C:\Windows\System32\vmguest.iso win没有 可以上网下一个，运行安装完后重启就可以了。</p>
<blockquote>
<p>https://pan.baidu.com/s/1T5E72bFlM4YbMTTrOZCtcQ 提取码：pjsd</p>
</blockquote>
</li>
<li>
<p>ctrl+shift+delete冲突</p>
<p>点击连接虚拟机，”文件“下行第一个图标，或“操作"中第一个可以向虚拟机发送 ctrl+shift+delete</p>
</li>
<li>
<p>远程桌面鼠标无法捕获</p>
<p>点击连接虚拟机，”操作“，选取【插入集成服务安装盘】。会出现下列的安装，记住一定要等系统安装完成后，进入系统后，再点击这个，不然会安装失败。  等安装完成后，提示重启， 点击【是】重启后，即可使用鼠标。 </p>
</li>
<li>
<p>win7 hyperv管理器无法管理2012的hyperv 还是老老实实用远程桌面吧</p>
</li>
<li>
<p>加载本地磁盘或u盘</p>
<ul>
<li>可以把文件打包成ISO 然后当成光盘</li>
<li>加载vhd：我的电脑 管理 磁盘管理 附加VHD 使用完后 右键点击解除附加VHD</li>
</ul>
</li>
<li>
<p>ctrl+alt+左方向键 退出虚拟机鼠标捕获</p>
</li>
<li>
<p>vdi 转 vdh</p>
<blockquote>
<p>VBoxManage clonehd D:\resource\Mac OSX Yosemite.vdi D:\resource\MacOSXYosemite.vhd --format vhd </p>
</blockquote>
</li>
</ul>
  </div>

  <div class='zanshang'>
      <button id='showpay'>赏</button>
       <div id="payContent" class="payContent">

           <div><img src='/theme/images/weixinpay.png'><br>微信扫一扫</div>
           <div><img src='/theme/images/alipay.png'><br>支付宝扫一扫</div>

         </div>
   </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://www.imba.pub/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://www.imba.pub/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>